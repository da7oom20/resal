"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{8808:function(e,n,t){var r=t(9177);n.Z=(0,r.vU)({login:{id:"login.header",defaultMessage:"Login"},mobile:{id:"login.mobile",defaultMessage:"Mobile"},email:{id:"login.email",defaultMessage:"Email"},password:{id:"login.password",defaultMessage:"Password"},register:{id:"register.header",defaultMessage:"Register"},registerSubtitle:{id:"register.subtitle",defaultMessage:"Enter the required information to create a new account"},name:{id:"register.name",defaultMessage:"Name"},privacyMessage1:{id:"register.privacyMessage1",defaultMessage:"By creating an account you hereby consent to our"},privacyMessage2:{id:"register.privacyMessage2",defaultMessage:"and agree to its terms"},privacyPolicy:{id:"register.privacy",defaultMessage:"Privacy Policy"},terms:{id:"terms",defaultMessage:"Terms and Conditions"},and:{id:"and",defaultMessage:"and"},required:{id:"required",defaultMessage:"Required"},invalidEmail:{id:"invalidEmail",defaultMessage:"Invalid email"},passwordMinChar:{id:"passwordMinChar",defaultMessage:"8 Characters min"},mobileNumber:{id:"mobileNumber",defaultMessage:"Mobile number"},verify:{id:"verify",defaultMessage:"Enter the activation code"},verifySent:{id:"verifySent",defaultMessage:"We sent a one time password to the number"},verifyBtn:{id:"verifyBtn",defaultMessage:"Verify"},smsTimeRemaining:{id:"smsTimeRemaining",defaultMessage:"Resend Message after"},resendBtn:{id:"resendBtn",defaultMessage:"Resend"},forgotPassword:{id:"landing.forgotPassword",defaultMessage:"Forgot your password?"},forgotPasswordMessage:{id:"landing.forgotPasswordMessage",defaultMessage:"Add your email address and we will send you a link to reset your password"},resetPassword:{id:"landing.resetPassword",defaultMessage:"Reset Password"},backToLogin:{id:"landing.backToLogin",defaultMessage:"Back to Login"},passwordMismatch:{id:"landing.passwordMismatch",defaultMessage:"Passwords don't match"},confirmPassword:{id:"landing.confirmPassword",defaultMessage:"Confirm Password"},dontHaveAcct:{id:"landing.dontHaveAcct",defaultMessage:"Don't have an account?"},orContinueWith:{id:"landing.orContinueWith",defaultMessage:"Or continue with"},facebook:{id:"landing.facebook",defaultMessage:"Facebook"},google:{id:"landing.google",defaultMessage:"Google"},haveAcct:{id:"landing.haveAcct",defaultMessage:"Already have an account?"},resetSent:{id:"landing.resetSent",defaultMessage:"We sent you an email to reset your password"},OTPResend:{id:"otp.resend",defaultMessage:"Resend"},OTPResendMessage:{id:"otp.OTPResendMessage",defaultMessage:"Didn't receive the code?"},loginSubtitle:{id:"login.subtitle",defaultMessage:"Enter your email and password to login"},resetEmailSentTitle:{id:"forgotPassword.resetEmailSentTitle",defaultMessage:"reset password link is sent to your inbox"},resetEmailSentSubtitle:{id:"forgotPassword.resetEmailSentSubtitle",defaultMessage:"please check your email inbox and click the link to reset the password"},reset:{id:"resetPassword.reset",defaultMessage:"Reset"},resetLinkResend:{id:"forgotPassword.resetLinkResend",defaultMessage:"Resend Link"},resetLinkNotReceived:{id:"forgotPassword.resetLinkNotReceived",defaultMessage:"Didn't receive it?"},resetLinkResendAfter:{id:"forgotPassword.resetLinkResendAfter",defaultMessage:"You can resend it after"}})},3570:function(e,n,t){t.d(n,{m:function(){return v}});var r=t(2322),a=t(2784),s=t(3112),o=t(8808),i=t(3655),l=t(2350),c=t(8130),d=t(5351),u=t(4203),f=t(5830),m=t(9520),g=t(901),p=t(1243),h=function(e){var n=e.time,t=e.onComplete,i=e.onResend,l=(0,a.useState)(Math.ceil((n.getTime()-Date.now())/1e3)),c=l[0],d=l[1],u=(0,a.useState)(!1),f=u[0],m=u[1],g=(0,s.Z)().formatMessage;return(0,a.useEffect)((function(){var e=!1,t=setInterval((function(){e||d((function(e){return e>0?Math.max(0,Math.ceil((n.getTime()-Date.now())/1e3)):(clearInterval(t),m(!0),0)}))}),1e3);return function(){e=!0,clearInterval(t)}}),[t,n]),(0,a.useEffect)((function(){f&&t()}),[t,f]),(0,r.jsxs)(r.Fragment,{children:[g(o.Z.OTPResendMessage)," ",(0,r.jsx)("button",{className:"disabled:text-neutral-600 text-primary-700",disabled:c>0,onClick:i,children:g(o.Z.OTPResend)}),(0,r.jsx)("span",{children:c>0?" ".concat(Math.floor(c/60),":").concat("0".concat(c%60).slice(-2)):""})]})},v=function(e){var n,t=e.mobile,v=e.onCompleteVerification,y=(0,s.Z)(),x=y.formatMessage,w=y.locale,b=(0,a.useState)(""),M=b[0],S=b[1],j=(0,a.useState)(!1),_=j[0],N=j[1],k=(0,a.useState)(!1),E=k[0],Z=k[1],P=(0,a.useState)(new Date(Date.now()+12e4)),C=P[0],R=P[1],A=(0,c.uM)((function(e){var n;return null===(n=e.user)||void 0===n?void 0:n.phone})),T=(0,g.Z7)().addAlert,L=(0,f.NL)(),D=(n={onSuccess:function(e){if("ServerError"===e.verifyPhone.__typename||"ValidationError"===e.verifyPhone.__typename){var n="ServerError"===e.verifyPhone.__typename?e.verifyPhone.message:e.verifyPhone.errors[0].message;T({message:n,type:"error"})}else"BooleanType"===e.verifyPhone.__typename&&(L.invalidateQueries(["Me"]),v())}},(0,l.D)(["VerifyPhone"],(function(e){return(0,i._)("\n    mutation VerifyPhone($code: String!, $acceptLanguage: String) {\n  verifyPhone(code: $code, acceptLanguage: $acceptLanguage) {\n    __typename\n    ... on BooleanType {\n      data\n    }\n    ... on ServerError {\n      message\n      ikey\n    }\n    ... on ValidationError {\n      errors {\n        field\n        message\n      }\n      ikey\n    }\n  }\n}\n    ",e)()}),n)),$=D.mutate,F=D.isLoading,O=(0,d.fm)({onSuccess:function(){R(new Date(Date.now()+12e4)),Z(!1)}}),I=O.mutate,V=O.isLoading,z=(0,a.useCallback)((function(){Z(!0)}),[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center",children:x(o.Z.verify)}),(0,r.jsxs)("h2",{className:"mt-3 text-center",children:[x(o.Z.verifySent)," ",t]}),(0,r.jsx)("div",{className:"mt-16 flex justify-center",children:(0,r.jsx)(m.M,{length:6,onSuccess:function(e){return S(e)},onValidityChange:function(e){return N(e)}})}),(0,r.jsx)("div",{className:"text-center mt-14",children:(0,r.jsx)(h,{time:C,onComplete:z,onResend:function(){if(E&&null!=A){var e=(0,u.s)(A),n=e.mobile,t=e.country;if(null==n||null==t){var r=new Error("invalid mobile");throw r.data={phone:A,mobile:n,country:t},r}I({lang:w,phone:n,country_code:parseInt(t,10)})}}})}),(0,r.jsx)("div",{className:"text-center mt-5",children:(0,r.jsx)(p.z,{isFullWidth:!0,status:F||V||!_?"disabled":"idle",onClick:function(){if(!E&&_)try{$({code:M,acceptLanguage:w})}catch(e){console.log("verify failed",e)}},children:x(o.Z.verifyBtn)})})]})}},9786:function(e,n,t){t.d(n,{a:function(){return N}});var r=t(865),a=t(6670),s=t(2322),o=t(8883),i=t(901),l=t(5121),c=t(3281),d=t(8130),u=t(9097),f=t.n(u),m=t(5847),g=t.n(m),p=t(2784),h=t(3955),v=t(3112),y=t(6901),x=t(3655),w=t(2350),b=t(9473),M=t(1243),S=t(8808),j="https://www.google.com/recaptcha/api.js?render=".concat("6LdD5TAbAAAAAKQOHrcPCiMG05quL1CMD0nK_MAZ"),_=function(e){return y.z.object({country:y.z.string().nonempty(e(S.Z.required)),mobile:y.z.string().nonempty(e(S.Z.required)),password:y.z.string().min(8,e(S.Z.passwordMinChar)).nonempty(e(S.Z.required)),email:y.z.string().email(e(S.Z.invalidEmail)).nonempty(e(S.Z.required)),name:y.z.string()})},N=function(e){var n,t=e.login,u=e.verify,m=(0,v.Z)(),y=m.formatMessage,N=m.locale,k=(0,d.uM)(),E=k.setTokens,Z=k.setUser,P=(0,h.cI)({resolver:(0,o.F)(_(y)),defaultValues:{country:"966"}}),C=P.register,R=P.handleSubmit,A=P.setError,T=P.formState.errors,L=P.control,D=P.setValue,$=(0,b.Z)(),F=$.trackEvent,O=$.events,I=(0,p.useState)(function(e){return null!=document.querySelector('script[src="'+e+'"]')}(j)),V=I[0],z=I[1],q=(0,i.Z7)().addAlert,B=(n={onSuccess:function(e,n){if("ValidationError"===e.signup.__typename)e.signup.errors.map((function(e){var n=e.field;"name"!==n&&"email"!==n&&"password"!==n&&"mobile"!==n&&"country"!==n||A(n,{message:e.message})}));else if("ServerError"===e.signup.__typename)q({message:e.signup.message,type:"error"});else try{E({accessToken:e.signup.accessToken,refreshToken:e.signup.refreshToken}),Z((0,r.Z)({},e.signup.user)),u("+".concat(n.country_code).concat(n.phone)),F(O.SIGNUP)}catch(e){console.log("set user failed",e)}}},(0,w.D)(["Signup"],(function(e){return(0,x._)("\n    mutation Signup($name: String!, $email: String!, $password: String!, $phone: String!, $country_code: String!, $password_confirmation: String!, $captcha_token: String!, $acceptLanguage: String) {\n  signup(\n    name: $name\n    email: $email\n    password: $password\n    phone: $phone\n    country_code: $country_code\n    password_confirmation: $password_confirmation\n    captcha_token: $captcha_token\n    lang: $acceptLanguage\n  ) {\n    __typename\n    ... on AuthResponse {\n      user {\n        id\n        email\n        phone\n        identifier\n        is_phone_verified\n        is_email_verified\n        name\n        is_superuser\n        gender_id\n        balance\n      }\n      accessToken\n      refreshToken\n    }\n    ... on ValidationError {\n      errors {\n        field\n        message\n      }\n      ikey\n    }\n    ... on ServerError {\n      message\n      ikey\n    }\n  }\n}\n    ",e)()}),n)),W=B.mutate,G=B.isLoading;return(0,s.jsxs)("div",{className:"flex flex-col pb-10 h-full w-full",children:[(0,s.jsx)("h1",{className:"text-neutral-1000 text-3xl font-bold text-center md:text-start",children:y(S.Z.register)}),(0,s.jsx)("span",{className:"mt-3 text-neutral-700 text-center md:text-start",children:y(S.Z.registerSubtitle)}),(0,s.jsxs)("form",{className:"space-y-3 mt-12",onSubmit:R((function(e){grecaptcha.ready((function(){grecaptcha.execute("6LdD5TAbAAAAAKQOHrcPCiMG05quL1CMD0nK_MAZ",{action:"submit"}).then((function(n){try{W({name:e.name,email:e.email,password:e.password,phone:"".concat("0"===e.mobile[0]?e.mobile.slice(1):e.mobile),password_confirmation:e.password,country_code:e.country,captcha_token:n,acceptLanguage:N})}catch(e){console.log("register failed",e)}}))}))})),children:[(0,s.jsx)(l.S,{label:y(S.Z.name),name:"name",error:T,children:(0,s.jsx)("input",(0,a.Z)((0,r.Z)({dir:"ltr",type:"text"},C("name")),{id:"name",placeholder:" ",className:l.N}))}),(0,s.jsx)(l.S,{label:y(S.Z.email),name:"email",error:T,children:(0,s.jsx)("input",(0,a.Z)((0,r.Z)({dir:"ltr",type:"email"},C("email")),{id:"email",placeholder:" ",className:l.N}))}),(0,s.jsx)(l.S,{name:"password",label:y(S.Z.password),error:T,children:(0,s.jsx)("input",(0,a.Z)((0,r.Z)({dir:"ltr",type:"password"},C("password")),{id:"password",autoComplete:"new-password",placeholder:" ",className:l.N}))}),(0,s.jsx)(c.sb,{countryName:"country",name:"mobile",register:C,control:L,label:y(S.Z.mobileNumber),locale:N,onSelect:function(e){return D("country",e)},error:T}),(0,s.jsx)(M.z,{status:G?"loading":"idle",isFullWidth:!0,onClick:function(){},style:{marginTop:24},children:y(S.Z.register)}),(0,s.jsxs)("div",{className:"flex justify-center pt-7 text-neutral-700",children:[y(S.Z.haveAcct),(0,s.jsx)("button",{type:"button",className:"text-identity-primary mis-1",onClick:t,disabled:!V,children:y(S.Z.login)})]})]}),(0,s.jsxs)("div",{className:"inline text-center text-xs text-neutral-600 mt-auto",children:[(0,s.jsxs)("span",{children:[y(S.Z.privacyMessage1)," "]}),(0,s.jsx)(f(),{href:"/service-agreement",children:(0,s.jsx)("a",{children:(0,s.jsx)("span",{className:"font-semibold underline underline-offset-1",children:y(S.Z.terms)})})}),(0,s.jsxs)("span",{children:[" ",y(S.Z.and)," "]}),(0,s.jsx)(f(),{href:"/privacy-policy",children:(0,s.jsx)("a",{children:(0,s.jsxs)("span",{className:"font-semibold underline underline-offset-1",children:[y(S.Z.privacyPolicy)," "]})})}),(0,s.jsx)("span",{children:y(S.Z.privacyMessage2)})]}),(0,s.jsx)(g(),{src:j,strategy:"lazyOnload",onLoad:function(){return z(!0)}})]})}},4203:function(e,n,t){t.d(n,{s:function(){return a}});var r=["1","7","20","27","30","31","32","33","34","36","39","40","41","43","44","45","46","47","48","49","51","52","53","54","55","56","57","58","60","61","62","63","64","65","66","81","82","84","86","90","91","92","93","94","95","98","211","212","213","216","218","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","260","261","262","263","264","265","266","267","268","269","290","291","297","298","299","350","351","352","353","354","355","356","357","358","359","370","371","372","373","374","375","376","377","378","380","381","382","383","385","386","387","389","420","421","423","500","501","502","503","504","505","506","507","508","509","590","591","592","593","594","595","596","597","598","599","670","672","673","674","675","676","677","678","679","680","681","682","683","685","686","687","688","689","690","691","692","850","852","853","855","856","880","886","960","961","962","963","964","965","966","967","968","970","971","972","973","974","975","976","977","992","993","994","995","996","998"],a=function(e){for(var n="+"===e[0],t=2;t-1<=3&&t<=e.length;){var a=e.slice(n?1:0,t);if(r.includes(a))return{country:a,mobile:e.slice(t)};t++}return{}}},9473:function(e,n,t){t(2784);var r={LOGIN:"y9i8aw",SIGNUP:"stervu",SELECT_CARD:"60hx13",VIEW_CARD:"yb0o05",BUY_NOW:"hrzizv",BEGIN_CHECKOUT:"j00id3",PURCHASE:"1msihm",ADD_TO_CART:"ocjz6k",NPS_DISMISSED:"wl27iw",NPS_RATED:"lvyxtv",REMOVE_FROM_CART:"53idd4",VIEW_OFFER:"8l4xd5",VIEW_OFFERS:"cy173m",SEARCH:"7xbell",VIEW_CATEGORY:"v15fwb",COPY_CARD_CODE:"kwdiw4"};n.Z=function(){var e=function(){return window.Adjust?window.Adjust:null};return{trackEvent:function(n){var t=e();null!=t&&t.trackEvent({eventToken:n})},trackPurchase:function(n,t){var r=e();null!=r&&r.trackEvent({eventToken:n,revenue:t,currency:"SAR"})},events:r}}},3281:function(e,n,t){t.d(n,{sb:function(){return g}});var r=t(865),a=t(6383),s=t(2322),o=t(1586),i=t(2784),l=t(3955),c=t(7866),d=t(5121),u=t(4035),f=function(e){var n,t,a=e.name,o=e.label,i=e.error,c=e.register,f=e.countryName,m=e.showModal,g=e.control,p=(0,l.qo)({control:g,name:f});console.log("country",p),console.log("countryName",f);var h=null!==(t=null===(n=u.J.find((function(e){return e[0]===p})))||void 0===n?void 0:n[1])&&void 0!==t?t:p;return(0,s.jsxs)("div",{dir:"ltr",className:"flex w-full",children:[(0,s.jsx)("div",{className:"flex w-full max-w-[100px] border-r absolute h-14 z-1 pt-3",style:{direction:"ltr"},children:(0,s.jsxs)("button",{className:"flex items-center mx-auto text-neutral-600 rounded-none bg-transparent",onClick:m,type:"button",id:f,children:[(0,s.jsx)("label",{htmlFor:f,className:"sr-only",children:"Country"}),(0,s.jsx)("span",{children:h})]})}),(0,s.jsx)("div",{className:"flex flex-col w-full relative",children:(0,s.jsxs)(d.S,{className:"w-full",label:null!=o?o:"",name:a,error:i,hideLabel:!0,errorNames:[a,f],children:[(0,s.jsx)("input",(0,r.Z)({dir:"ltr",type:"tel",id:a,pattern:"^\\d+$",className:"mt-2 py-0 bg-transparent focus:ring-0 focus:border-0 block ring-0 border-0 w-full sm:text-sm border-gray-300 text-left h-12 peer pl-28"},c(a))),(0,s.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-neutral-600 absolute duration-300 transform-gpu top-4 inset-inline-3 origin-top-left peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-[.80] peer-focus:-translate-y-3 pointer-events-none z-1 rtl:text-right text-left pl-28",children:o})]})})]})},m=function(e){var n=e.locale,t=e.onSelect,r=e.onClose,o=e.autoFocus,l=e.inputRef,d=(0,i.useRef)(null);(0,c.Z)(d,(function(){console.log("click outside"),r()}));var f=(0,i.useState)(""),m=f[0],g=f[1],p=(0,i.useMemo)((function(){return""!==m?u.J.filter((function(e){return null!=e[2]&&e[2].toLowerCase().includes(m)||null!=e[3]&&e[3].includes(m)||null!=e[4]&&e[4].includes(m)})):u.J}),[m]);return(0,s.jsxs)("div",{className:"w-full max-w-xs flex flex-col p-4 rounded border border-neutral-400 bg-white",ref:d,children:[(0,s.jsx)("input",{type:"search",value:m,className:"p-2 rounded-lg bg-neutral-30 border-0 ring-0 focus:ring-neutral-70",onChange:function(e){g(e.currentTarget.value)},autoFocus:o,ref:l}),(0,s.jsx)("div",{className:"flex flex-col items-stretch max-h-56 overflow-y-auto",children:p.map((function(e){var r=(0,a.Z)(e,5),o=r[0],i=r[2],l=r[3],c=r[4];return(0,s.jsxs)("button",{onClick:function(){return t(o)},className:"flex flex-row h-14 p-4 space-i-4 text-neutral-1000 items-center",type:"button",children:[null!=c?(0,s.jsxs)("picture",{children:[(0,s.jsx)("source",{type:"image/webp",srcSet:"https://flagcdn.com/36x27/".concat(c,".webp,\nhttps://flagcdn.com/72x54/").concat(c,".webp 2x,\nhttps://flagcdn.com/108x81/").concat(c,".webp 3x")}),(0,s.jsx)("source",{type:"image/png",srcSet:"https://flagcdn.com/36x27/".concat(c,".png,\nhttps://flagcdn.com/72x54/").concat(c,".png 2x,\nhttps://flagcdn.com/108x81/").concat(c,".png 3x")}),(0,s.jsx)("img",{src:"https://flagcdn.com/36x27/".concat(c,".png"),width:"36",height:"27",alt:"South Africa"})]}):(0,s.jsx)("div",{style:{width:36,height:27}}),(0,s.jsx)("span",{className:"text-start",children:"ar"===n?l:i})]},c)}))})]})},g=function(e){var n=e.name,t=e.label,r=e.error,a=e.register,l=e.countryName,c=e.control,d=e.locale,u=e.onSelect,g=e.autoFocus,p=(0,i.useRef)(null),h=(0,i.useState)(!1),v=h[0],y=h[1];return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f,{countryName:l,name:n,register:a,showModal:function(){y(!0)},control:c,label:t,error:r}),(0,s.jsx)(o.u,{show:v,enter:"transform duration-200 transition ease-out",enterFrom:"opacity-0 scale-50",enterTo:"opacity-100 scale-100",leave:"transform duration-200 transition ease-in",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-50",className:"fixed inset-0 md:inset-auto md:absolute z-10 md:top-0 md:left-0 -translate-y-0.5 origin-top-right scale",afterEnter:function(){var e;null===(e=p.current)||void 0===e||e.focus()},children:(0,s.jsx)(m,{locale:d,onClose:function(){y(!1)},onSelect:function(e){u(e),y(!1)},inputRef:p,autoFocus:g})})]})}},6883:function(e,n,t){t.d(n,{S1:function(){return s},ZT:function(){return r},jU:function(){return o},on:function(){return a}});var r=function(){};function a(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e&&e.addEventListener&&e.addEventListener.apply(e,n)}function s(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e&&e.removeEventListener&&e.removeEventListener.apply(e,n)}var o="undefined"!=typeof window},7866:function(e,n,t){var r=t(2784),a=t(6883),s=["mousedown","touchstart"];n.Z=function(e,n,t){void 0===t&&(t=s);var o=(0,r.useRef)(n);(0,r.useEffect)((function(){o.current=n}),[n]),(0,r.useEffect)((function(){for(var n=function(n){var t=e.current;t&&!t.contains(n.target)&&o.current(n)},r=0,s=t;r<s.length;r++){var i=s[r];(0,a.on)(document,i,n)}return function(){for(var e=0,r=t;e<r.length;e++){var s=r[e];(0,a.S1)(document,s,n)}}}),[t,e])}}}]);