"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{6066:function(e,n,t){t.d(n,{o:function(){return y}});var r=t(865),s=t(6670),o=t(2322),i=t(8883),a=t(3655),l=t(2350),c=t(3955),d=t(3112),m=t(6901),u=t(5121),g=t(1243),f=t(8808),x=t(901),p=t(2784),h=function(e){return m.z.object({email:m.z.string().email(e(f.Z.invalidEmail))})},y=function(e){var n,t=e.login,m=(0,p.useState)(!1),y=m[0],j=m[1],b=(0,d.Z)(),v=b.formatMessage,w=b.locale,Z=(0,c.cI)({resolver:(0,i.F)(h(v))}),S=Z.register,N=Z.handleSubmit,_=Z.setError,k=Z.formState.errors,E=(0,x.Z7)().addAlert,L=(n={onSettled:function(e,n){"ServerError"===(null==e?void 0:e.forgetPassword.__typename)?E({message:e.forgetPassword.message,type:"error"}):"ValidationError"===(null==e?void 0:e.forgetPassword.__typename)?(e.forgetPassword.errors.forEach((function(e){_(e.field,{message:e.message})})),E({message:e.forgetPassword.errors[0].message,type:"error"})):j(!0)}},(0,l.D)(["ForgotPassword"],(function(e){return(0,a._)("\n    mutation ForgotPassword($id: String!, $acceptLanguage: String) {\n  forgetPassword(id: $id, acceptLanguage: $acceptLanguage) {\n    ... on BooleanType {\n      data\n    }\n    ... on ServerError {\n      message\n      ikey\n    }\n    ... on ValidationError {\n      errors {\n        field\n        message\n      }\n      ikey\n    }\n  }\n}\n    ",e)()}),n)),C=L.mutate,F=L.isLoading;return(0,o.jsx)(o.Fragment,{children:y?(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsxs)("svg",{width:128,height:128,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{width:128,height:128,rx:64,fill:"#F8FAFF"}),(0,o.jsx)("path",{d:"M86.3 62.43c-1.9-.5-4.13-.76-6.8-.76-3.7 0-5.07.9-6.97 2.33-.1.07-.2.17-.3.27l-3.16 3.36a7.1 7.1 0 0 1-10.14 0l-3.16-3.33c-.1-.13-.2-.23-.3-.3-1.94-1.43-3.3-2.33-6.97-2.33-2.67 0-4.9.23-6.8.76-7.93 2.14-7.93 8.44-7.93 13.97v3.1c0 8.37 0 17.83 17.83 17.83h24.8c11.83 0 17.83-6 17.83-17.83v-3.1c0-5.53 0-11.83-7.93-13.97Z",fill:"#1C4EF2"}),(0,o.jsx)("path",{opacity:.4,d:"M73.3 30.67H54.7c-14.73 0-14.73 7.83-14.73 14.73v19.3c0 .73.33 1.4.9 1.83.56.44 1.33.6 2.03.4 1.5-.4 3.37-.6 5.6-.6 2.23 0 2.7.27 4.03 1.27l3.04 3.2a11.6 11.6 0 0 0 16.93 0l3.03-3.2c1.34-1 1.8-1.27 4.04-1.27 2.23 0 4.1.2 5.6.6.7.2 1.43.04 2.03-.4.57-.43.9-1.13.9-1.83V45.4c-.07-6.9-.07-14.73-14.8-14.73Z",fill:"#1C4EF2"}),(0,o.jsx)("path",{d:"M69.17 57.03H58.83a2.32 2.32 0 0 1-2.33-2.33c0-1.3 1.03-2.33 2.33-2.33h10.34c1.3 0 2.33 1.03 2.33 2.33a2.36 2.36 0 0 1-2.33 2.33Zm2.6-9.3H56.23a2.32 2.32 0 0 1-2.33-2.33c0-1.3 1.03-2.33 2.33-2.33h15.5a2.33 2.33 0 0 1 .03 4.67Z",fill:"#1C4EF2"})]}),(0,o.jsx)("h1",{className:"text-3xl font-bold text-neutral-1000 mb-5 mt-8 text-center",children:v(f.Z.resetEmailSentTitle)}),(0,o.jsx)("p",{className:"text-neutral-700 leading-7 mb-12 text-center",children:v(f.Z.resetEmailSentSubtitle)})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-neutral-1000 mb-3 mt-8 md:mt-0 text-center md:text-start",children:v(f.Z.forgotPassword)}),(0,o.jsx)("p",{className:"text-neutral-700 leading-7 mb-12 text-center md:text-start",children:v(f.Z.forgotPasswordMessage)}),(0,o.jsxs)("form",{className:"space-y-4 mt-3",onSubmit:N((function(e){try{C({id:e.email,acceptLanguage:w})}catch(e){console.log("error",e)}})),children:[(0,o.jsx)("div",{children:(0,o.jsx)(u.S,{label:v(f.Z.email),name:"email",error:k,children:(0,o.jsx)("input",(0,s.Z)((0,r.Z)({dir:"ltr",type:"email"},S("email")),{id:"email",placeholder:" ",className:u.N}))})}),(0,o.jsx)("div",{children:(0,o.jsx)(g.z,{status:F?"loading":"idle",isFullWidth:!0,style:{marginBottom:12,marginTop:16},children:v(f.Z.resetPassword)})})]}),(0,o.jsx)("button",{disabled:F,className:"w-full flex justify-center py-4 px-4 border border-transparent rounded-xl shadow-sm text-sm font-bold text-identity-primary bg-primary-30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-identity-primary disabled:opacity-60",onClick:t,children:v(f.Z.backToLogin)})]})})}},8363:function(e,n,t){t.r(n),t.d(n,{LoginRegister:function(){return m}});var r=t(2322),s=t(2784),o=t(8130),i=t(3846),a=t(6066),l=t(179),c=t(3570),d=t(9786),m=function(){var e=(0,o.LY)(),n=e.mode,t=e.setUIMode,m=(0,s.useState)(""),u=m[0],g=m[1],f=(0,s.useState)(n),x=f[0],p=f[1];(0,s.useEffect)((function(){"idle"!==n&&p(n)}),[n]);var h=(0,s.useCallback)((function(){t("idle")}),[]),y=(0,s.useCallback)((function(){n!=x&&p(n)}),[x,n]);return(0,r.jsx)(i.u,{open:"forgot"===n||"login"===n||"register"===n||"otp"===n,onClose:h,afterLeave:y,children:(0,r.jsxs)("div",{className:"p-4 sm:px-16 sm:pt-16 sm:pb-12 flex flex-col relative text-start w-screen max-w-full sm:w-[730px] overflow-y-auto",style:{maxHeight:"calc(100vh - 1rem)"},children:[(0,r.jsxs)("button",{className:"absolute top-6 w-6 h-6 inline-start-6",onClick:h,children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),"login"===x?(0,r.jsx)(l.m,{register:function(){t("register")},onComplete:h,forgot:function(){t("forgot")}}):"register"===x?(0,r.jsx)(d.a,{login:function(){t("login")},verify:function(e){g(e),t("otp")}}):"otp"===x?(0,r.jsx)(c.m,{mobile:u,onCompleteVerification:h}):"forgot"===x?(0,r.jsx)(a.o,{login:function(){t("login")}}):null]})})}},179:function(e,n,t){t.d(n,{m:function(){return b}});var r=t(865),s=t(6670),o=t(2322),i=t(2784),a=t(3112),l=t(3955),c=t(8883),d=t(6901),m=t(8130),u=t(8808),g=t(5121),f=t(3281),x=t(1243),p=t(3655),h=t(2350),y=t(901),j=t(9473);function b(e){var n,t,b=e.register,v=e.onComplete,w=e.forgot,Z=(0,a.Z)(),S=Z.formatMessage,N=Z.locale,_=(0,m.uM)(),k=_.setTokens,E=_.setUser,L=(0,i.useState)("email"),C=L[0],F=(L[1],(0,l.cI)({resolver:function(e,t,r){return(0,c.F)(function(e,n){return d.z.object({password:d.z.string().nonempty(e(u.Z.required))}).extend("mobile"===n?{country:d.z.string().nonempty(e(u.Z.required)),mobile:d.z.string().nonempty(e(u.Z.required))}:{email:d.z.string().email(e(u.Z.invalidEmail)).nonempty(e(u.Z.required))})}(S,null!==(n=null==t?void 0:t.mode)&&void 0!==n?n:"mobile"))(e,t,r)},context:{mode:C,locale:N}})),P=F.register,T=F.handleSubmit,z=F.setError,$=F.control,M=F.formState.errors,V=F.setValue,A=(0,y.Z7)().addAlert,H=(0,j.Z)(),R=H.trackEvent,q=H.events,B=(t={onSuccess:function(e){if("ServerError"===e.login.__typename)A({message:e.login.message,type:"error"});else if("ValidationError"===e.login.__typename)e.login.errors.forEach((function(e){z(e.field,{message:e.message})}));else if("AuthResponse"===e.login.__typename)try{k({accessToken:e.login.accessToken,refreshToken:e.login.refreshToken}),E((0,r.Z)({},e.login.user)),R(q.LOGIN),v()}catch(e){console.log("set user failed",e)}}},(0,h.D)(["Login"],(function(e){return(0,p._)("\n    mutation Login($email: String!, $password: String!, $acceptLanguage: String) {\n  login(email: $email, password: $password, acceptLanguage: $acceptLanguage) {\n    __typename\n    ... on AuthResponse {\n      user {\n        id\n        email\n        phone\n        is_phone_verified\n        is_email_verified\n        name\n        is_superuser\n        gender_id\n        balance\n      }\n      accessToken\n      refreshToken\n    }\n    ... on ValidationError {\n      errors {\n        field\n        message\n      }\n      ikey\n    }\n    ... on ServerError {\n      message\n      ikey\n    }\n  }\n}\n    ",e)()}),t)),I=B.mutate,D=B.isLoading;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-neutral-1000 mb-3 mt-8 md:mt-0 text-center md:text-start",children:S(u.Z.login)}),(0,o.jsx)("span",{className:"text-neutral-700 mb-8 text-center md:text-start",children:S(u.Z.loginSubtitle)}),(0,o.jsxs)("form",{className:"space-y-4 mt-3",onSubmit:T((function(e){try{I({email:e.email,password:e.password,acceptLanguage:N})}catch(e){console.log("error",e)}})),children:["mobile"===C?(0,o.jsx)("div",{children:(0,o.jsx)(f.sb,{countryName:"country",name:"mobile",register:P,control:$,locale:N,onSelect:function(e){V("country",e)}})}):(0,o.jsx)("div",{children:(0,o.jsx)(g.S,{label:S(u.Z.email),name:"email",error:M,children:(0,o.jsx)("input",(0,s.Z)((0,r.Z)({dir:"ltr",type:"email"},P("email")),{id:"email",placeholder:" ",className:g.N}))})}),(0,o.jsx)("div",{children:(0,o.jsx)(g.S,{name:"password",label:S(u.Z.password),error:M,children:(0,o.jsx)("input",(0,s.Z)((0,r.Z)({dir:"ltr",type:"password"},P("password")),{id:"password",placeholder:" ",className:g.N}))})}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"text-identity-primary font-semibold",onClick:w,type:"button",children:S(u.Z.forgotPassword)})}),(0,o.jsx)("div",{children:(0,o.jsx)(x.z,{status:D?"loading":"idle",isFullWidth:!0,style:{marginTop:8,marginBottom:24},children:S(u.Z.login)})}),(0,o.jsxs)("div",{className:"flex justify-center",children:[S(u.Z.dontHaveAcct),(0,o.jsx)("button",{type:"button",className:"text-identity-primary font-semibold mis-1",onClick:b,children:S(u.Z.register)})]})]})]})}}}]);